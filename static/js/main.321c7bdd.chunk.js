(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(32)},25:function(e,t,a){},27:function(e,t,a){},3:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);a(3);var n=a(0),r=a.n(n),s=a(5),l=a.n(s),c=a(1),u=a.n(c),i=a(6),o=a(7),m=a(8),h=a(11),f=a(9),d=a(12),p=a(2),E=a.n(p),b=(a(25),function(e){var t=e.searchTerm,a=e.submitForm,n=e.updateInput;return r.a.createElement("form",{onSubmit:a},r.a.createElement("label",null,"Search for an artist"),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",{className:"searchbox",onChange:n,type:"text",value:t}),r.a.createElement("input",{className:"submit-btn",type:"submit",value:"Submit"})))}),v=(a(27),a(10)),g=a.n(v),w=function(e){var t=e.datetime,a=e.url,n=e.venue;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{href:a,rel:"noopener noreferrer",target:"_blank"},n.name)),r.a.createElement("td",null,n.city),r.a.createElement("td",null,n.country),r.a.createElement("td",null,g()(t).format("DD MMM 'YY")))},y=(a(30),function(e){var t=e.children;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Venue"),r.a.createElement("th",null,"City"),r.a.createElement("th",null,"Country"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,t))}),k=function(e){var t,a,n=e.data;if(n.artistEvents&&0!==n.numUpcomingShows){var s=n.artistEvents.map(function(e){return r.a.createElement(w,Object.assign({key:e.id},e))});a=r.a.createElement(y,null,s)}else t=r.a.createElement("p",null,"Sorry, this artist doesn't have any upcoming shows. Please check back later.");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"artist-details"},r.a.createElement("img",{className:"artist-image",src:n.artistInfo.thumb_url,alt:n.artistInfo.name}),r.a.createElement("div",{className:"artist-details__top-level"},r.a.createElement("h2",null,n.artistInfo.name),n.artistInfo.facebook_page_url&&r.a.createElement("a",{href:n.artistInfo.facebook_page_url,rel:"noopener noreferrer",target:"_blank"},n.artistInfo.name,"'s Facebook page"),t)),a)},S=function(e){function t(){var e;Object(o.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).handleChange=function(t){e.setState({searchTerm:t.target.value})},e.handleSubmit=function(t){if(t.preventDefault(),0!==e.state.searchTerm.length){e.fetchResult();var a=window.location.href+"?query="+e.state.searchTerm;window.history.pushState({path:a},"",a)}};var a=window.localStorage.getItem("searchTerm")||"",n=new URL(document.location).searchParams.get("query");return n&&n.length>0&&(a=n),e.state={artistEvents:null,artistInfo:null,foundArtist:null,numUpcomingShows:null,searchTerm:a},e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"fetchResult",value:function(){var e=Object(i.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()("https://rest.bandsintown.com/artists/".concat(this.state.searchTerm,"?app_id=asdf"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,0===Object.keys(a).length){e.next=17;break}return e.next=9,E()("https://rest.bandsintown.com/artists/".concat(this.state.searchTerm,"/events/?app_id=asdf"));case 9:return n=e.sent,e.next=12,n.json();case 12:r=e.sent,this.setState({artistEvents:r,artistInfo:a,foundArtist:!0,numUpcomingShows:r.length}),window.localStorage.setItem("searchTerm",this.state.searchTerm),e.next=18;break;case 17:this.setState({foundArtist:!1});case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.state.searchTerm&&this.fetchResult()}},{key:"render",value:function(){var e;return!1===this.state.foundArtist&&(e=r.a.createElement("p",null,"Sorry, we couldn't find anyone by that name. Please search for someone else.")),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Upcoming Music"),r.a.createElement(b,{submitForm:this.handleSubmit,searchTerm:this.state.searchTerm,updateInput:this.handleChange}),this.state.foundArtist&&r.a.createElement(k,{data:this.state}),e)}}]),t}(r.a.Component);l.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.321c7bdd.chunk.js.map